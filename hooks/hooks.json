{
  "hooks": {
    "SessionStart": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "bash \"${CLAUDE_PLUGIN_ROOT}/scripts/capture_session_context.sh\"",
            "timeout": 3000,
            "description": "Capture session context (transcript_path, session_id)"
          },
          {
            "type": "command",
            "command": "cd \"${CLAUDE_PLUGIN_ROOT}\" && .venv/bin/python \"${CLAUDE_PLUGIN_ROOT}/scripts/init_rlm.py\"",
            "timeout": 5000,
            "description": "Initialize RLM environment and load config"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"${CLAUDE_PLUGIN_ROOT}\" && .venv/bin/python \"${CLAUDE_PLUGIN_ROOT}/scripts/check_complexity.py\" \"$PROMPT\"",
            "timeout": 3000,
            "description": "Check if RLM should activate based on task complexity"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"${CLAUDE_PLUGIN_ROOT}\" && .venv/bin/python \"${CLAUDE_PLUGIN_ROOT}/scripts/sync_context.py\"",
            "timeout": 2000,
            "description": "Sync tool context with RLM state"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"${CLAUDE_PLUGIN_ROOT}\" && .venv/bin/python \"${CLAUDE_PLUGIN_ROOT}/scripts/capture_output.py\"",
            "timeout": 2000,
            "description": "Capture tool output for RLM context"
          },
          {
            "type": "command",
            "command": "bash \"${CLAUDE_PLUGIN_ROOT}/scripts/track_file_access.sh\"",
            "timeout": 1000,
            "description": "Track file access patterns"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"${CLAUDE_PLUGIN_ROOT}\" && .venv/bin/python \"${CLAUDE_PLUGIN_ROOT}/scripts/externalize_context.py\"",
            "timeout": 10000,
            "description": "Externalize context before compaction"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": ".*",
        "hooks": [
          {
            "type": "command",
            "command": "cd \"${CLAUDE_PLUGIN_ROOT}\" && .venv/bin/python \"${CLAUDE_PLUGIN_ROOT}/scripts/save_trajectory.py\"",
            "timeout": 5000,
            "description": "Save trajectory on session end"
          }
        ]
      }
    ]
  }
}
